@using cloudscribe.SimpleContent.Web
@using cloudscribe.Web.Pagination
@using Microsoft.Extensions.Localization
@addTagHelper "*, cloudscribe.Web.Pagination"
@model cloudscribe.SimpleContent.Web.ViewModels.BlogViewModel
@inject IUrlHelper myhelper
@inject IStringLocalizer<SimpleContent> sr

@{
    var disqusCommentCountScriptPath = "//" + Model.ProjectSettings.DisqusShortName + ".disqus.com/count.js";
}
@section Meta {
    <meta name="robots" content="noindex, follow" />
    @{await Html.RenderPartialAsync("BlogMetaPartial", Model); }
}
@section Styles {
    @{await Html.RenderPartialAsync("BlogStylePartial", Model); }
}
@section Toolbar {
    @if (Model.CanEdit)
    {
        await Html.RenderPartialAsync("ToolsPartial", Model);
    }
}
<div class="blog-container">
    @if (Model.ProjectSettings.ShowTitle)
    {
        await Html.RenderPartialAsync("BlogHeaderPartial", Model.ProjectSettings);
    }
    <div itemscope itemtype="http://schema.org/Blog" class="row blogroot">
        <main class="col-md-9">
            @{await Html.RenderPartialAsync("PostListPartial", Model); }
            <nav>
                <cs-pager cs-paging-info="@Model.Paging"
                          cs-pager-ul-class="pager"
                          cs-pagenumber-param="page"
                          cs-show-first-last="false"
                          cs-show-numbered="false"
                          cs-use-reverse-increment="true"
                          cs-suppress-empty-nextprev="true"
                          cs-previous-page-text='@sr["< Older"]'
                          cs-next-page-text='@sr["Newer >"]'
                          asp-route="@Model.ListRouteName"
                          asp-route-category="@Model.CurrentCategory"></cs-pager>
            </nav>
        </main>
        <aside class="col-md-3 blog-aside">
            @{await Html.RenderPartialAsync("AboutPartial"); }
            @{await Html.RenderPartialAsync("CategoryListPartial", Model.Categories); }
            @{await Html.RenderPartialAsync("ArchiveListPartial", Model.Archives); }
        </aside>
    </div>
</div>
@section Bottom {
}
@section Scripts {
    @if (!string.IsNullOrEmpty(Model.ProjectSettings.DisqusShortName))
    {
        <script id="dsq-count-scr" src="@disqusCommentCountScriptPath" async></script>
    }
    @{await Html.RenderPartialAsync("BlogScriptsPartial", Model); }
}
