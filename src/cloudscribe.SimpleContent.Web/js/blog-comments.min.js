!function(){function e(e){var t=""
for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+e[n].replace(/ /g,"+")+"&")
return t.substring(0,t.length-1)}function t(e,t){return RegExp(" "+t+" ").test(" "+e.className+" ")}function n(e,n){t(e,n)||(e.className+=" "+n)}function o(e,n){var o=" "+e.className.replace(/[\t\r\n]/g," ")+" "
if(t(e,n)){for(;o.indexOf(" "+n+" ")>=0;)o=o.replace(" "+n+" "," ")
e.className=o.replace(/^\s+|\s+$/g,"")}}function a(e){var t=document.createElement("div")
return t.innerHTML=e,t.children}function r(e,t,n){for(var o=[];e&&(e=e.parentNode,e.hasAttribute(t)&&e.getAttribute(t)===n&&o.push(e),e.parentNode.parentNode););return o}function i(e,t,o){if("Up"===t)e.style.height="0px"
else{var a=e.cloneNode(!0)
a.style.position="absolute",a.style.visibility="hidden",a.style.height="auto",n(a,"slideClone col-md-6 col-md-offset-3"),document.body.appendChild(a)
var r=document.getElementsByClassName("slideClone")[0],i=r.clientHeight
r.remove(),e.style.height=i+"px",o&&setTimeout(function(){o()},500)}}function m(e,t){var n=document.querySelector("[itemprop=blogPost]").getAttribute("data-delete-comment-url")
confirm("Do you want to delete this comment?")&&s.postAjax(n,function(e,n){return 4===e&&200===n?void i(t,"Up",function(){t.remove()}):void(200!==n&&alert("Something went wrong. Please try again"))},{mode:"delete",postId:d,commentId:e,__RequestVerificationToken:document.querySelector("input[name=__RequestVerificationToken]").getAttribute("value")})}function l(e,t){var n=document.querySelector("[itemprop=blogPost]").getAttribute("data-approve-comment-url")
s.postAjax(n,function(e,n){return 4===e&&200===n?void t.remove():void(200!==n&&alert("Something went wrong. Please try again"))},{mode:"approve",postId:d,commentId:e,__RequestVerificationToken:document.querySelector("input[name=__RequestVerificationToken]").getAttribute("value")})}function u(e,t,r,m,l,u){localStorage&&(localStorage.setItem("name",e),localStorage.setItem("email",t),localStorage.setItem("website",r)),p=document.getElementById("commentform").getAttribute("data-blog-path"),s.postAjax(p,function(e,t,r){var m=document.getElementById("status")
if(4===e&&200===t){m.innerHTML="Your comment has been added",o(m,"alert-danger"),n(m,"alert-success"),document.getElementById("commentcontent").value=""
var l=a(r)[0]
l.style.height="0px"
var c=document.getElementById("comments")
return c.appendChild(l),i(l,"Down"),void u(!0)}200!==t&&(n(m,"alert-danger"),m.innerText="Unable to add comment",u(!1))},{mode:"save",postId:d,name:e,email:t,website:r,content:m,"g-recaptcha-response":l,__RequestVerificationToken:document.querySelector("input[name=__RequestVerificationToken]").getAttribute("value")})}function c(){d=document.querySelector("[itemprop=blogPost]").getAttribute("data-id"),p=document.getElementById("commentform").getAttribute("data-blog-path")
for(var e,n=document.getElementById("commentemail"),o=document.getElementById("commentname"),a=document.getElementById("commenturl"),i=document.getElementById("commentcontent"),c=document.getElementById("commentform"),s=document.querySelectorAll("[itemprop=comment]"),g=0;g<s.length;++g)s[g].style.height=s[g].clientHeight+"px"
c.onsubmit=function(t){t.preventDefault()
var r=t.target
r.setAttribute("disabled",!0)
var m=""
e=document.getElementById("g-recaptcha-response"),e&&(m=e.value,0==m.length)||u(o.value,n.value,a.value,i.value,m,function(){r.removeAttribute("disabled"),e&&grecaptcha.reset()})},a.addEventListener("keyup",function(e){var t=e.target
t.value.trim().length>=4&&-1===t.value.indexOf("http")&&(t.value="http://"+t.value)}),window.addEventListener("click",function(e){var n=e.target
if(t(n,"deletecomment")){var o=r(n,"itemprop","comment")[0]
m(o.getAttribute("data-id"),o)}if(t(n,"approvecomment")){var o=r(n,"itemprop","comment")[0]
l(o.getAttribute("data-id"),n)}}),localStorage&&(n.value=localStorage.getItem("email"),a.value=localStorage.getItem("website"),0===o.value.length&&(o.value=localStorage.getItem("name")))}var d=null,s=s?s:{}
s.ajax=function(e,t){var n=s.getAjaxRequest(t)
n.open("GET",e,!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(null)},s.postAjax=function(t,n,o){var a=s.getAjaxRequest(n)
a.open("POST",t,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(e(o))},s.getAjaxRequest=function(e){var t=new XMLHttpRequest
return t.onreadystatechange=function(){t.readyState>1&&t.status>0&&e(t.readyState,t.status,t.responseText)},t},Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var e=0,t=this.length;t>e;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])}
var p="/comment.ashx"
document.getElementById("commentform")&&c()}()
